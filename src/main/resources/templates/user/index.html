<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liora</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Material Design Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@7.4.47/css/materialdesignicons.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/user/css/style.css}">

</head>

<body>
    <!-- Navigation -->
    <div th:replace="user/layout/user-header :: header"></div>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Home Page -->
        <div id="home-page" class="page active">
            <!-- Banner Slider Section -->
            <section class="banner-slider-section">
                <div class="banner-slider-container">
                    <div class="banner-slider" id="bannerSlider">
                        <!-- Banners will be loaded here -->
                    </div>
                    <div class="slider-controls">
                        <button class="slider-btn prev-btn" id="prevBtn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <button class="slider-btn next-btn" id="nextBtn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <div class="slider-dots" id="sliderDots">
                        <!-- Dots will be generated here -->
                    </div>
                </div>
            </section>

            <!-- USP / Lợi ích nhanh -->
            <section class="py-4 border-bottom bg-white">
                <div class="container">
                    <div class="row g-3 text-center">
                        <div class="col-6 col-md-3">
                            <div class="d-flex flex-column align-items-center">
                                <i class="mdi mdi-truck-fast-outline fs-2 text-pink-primary"></i>
                                <div class="fw-semibold mt-2">Freeship đơn từ 0đ</div>
                                <small class="text-muted">Giao nhanh toàn quốc</small>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="d-flex flex-column align-items-center">
                                <i class="mdi mdi-shield-check-outline fs-2 text-pink-primary"></i>
                                <div class="fw-semibold mt-2">100% Chính hãng</div>
                                <small class="text-muted">Hóa đơn, tem phân phối</small>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="d-flex flex-column align-items-center">
                                <i class="mdi mdi-cash-multiple fs-2 text-pink-primary"></i>
                                <div class="fw-semibold mt-2">COD toàn quốc</div>
                                <small class="text-muted">Nhận hàng rồi thanh toán</small>
                            </div>
                        </div>
                        <div class="col-6 col-md-3">
                            <div class="d-flex flex-column align-items-center">
                                <i class="mdi mdi-heart-outline fs-2 text-pink-primary"></i>
                                <div class="fw-semibold mt-2">Chất lượng cao</div>
                                <small class="text-muted">Hiệu quả tức thì</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Danh mục nổi bật -->
            <section class="py-5 bg-light">
                <div class="container">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h2 class="fw-bold mb-0 text-uppercase">Danh mục nổi bật</h2>
                        <a href="/categories" class="text-pink-primary fw-semibold">Xem tất cả</a>
                    </div>
                    <div class="row g-4">
                        <div class="col-6 col-md-3">
                            <a href="/categories/skincare" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm h-100">
                                    <img class="card-img-top"
                                        src="https://images.unsplash.com/photo-1585237001925-83865001e31b?w=800&q=80"
                                        alt="Skincare">
                                    <div class="card-body text-center">
                                        <div class="fw-semibold">Chăm sóc da</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 col-md-3">
                            <a href="/categories/makeup" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm h-100">
                                    <img class="card-img-top"
                                        src="https://images.unsplash.com/photo-1522335789203-aabd1fc54bc9?w=800&q=80"
                                        alt="Makeup">
                                    <div class="card-body text-center">
                                        <div class="fw-semibold">Trang điểm</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 col-md-3">
                            <a href="/categories/hair" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm h-100">
                                    <img class="card-img-top"
                                        src="https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=800&q=80"
                                        alt="Hair">
                                    <div class="card-body text-center">
                                        <div class="fw-semibold">Tóc</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 col-md-3">
                            <a href="/categories/body" class="text-decoration-none text-dark">
                                <div class="card border-0 shadow-sm h-100">
                                    <img class="card-img-top"
                                        src="https://images.unsplash.com/photo-1613929720948-5b39c886d9c2?w=800&q=80"
                                        alt="Body care">
                                    <div class="card-body text-center">
                                        <div class="fw-semibold">Cơ thể</div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Khuyến mãi dành cho bạn -->
            <section class="py-5">
                <div class="container">
                    <h2 class="fw-bold mb-4 text-center text-uppercase">Khuyến mãi dành cho bạn</h2>
                    <div class="row g-3">
                        
                    </div>
                </div>
            </section>

            <!-- Best Sellers -->
            <section class="py-5">
                <div class="container">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h2 class="fw-bold mb-0 text-uppercase">Best Sellers</h2>
                        <a href="/products?sort=bestseller" class="text-pink-primary fw-semibold">Xem tất cả</a>
                    </div>
                    <div id="best-sellers-grid" class="row g-4">
                        <!-- Nội dung sản phẩm bestseller sẽ được render bằng JS -->
                    </div>
                </div>
            </section>

            <!-- Hàng mới về -->
            <section class="py-5 bg-light">
                <div class="container">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h2 class="fw-bold mb-0 text-uppercase">Hàng mới về</h2>
                        <a href="/products?sort=new" class="text-pink-primary fw-semibold">Xem tất cả</a>
                    </div>
                    <div id="new-arrivals-grid" class="row g-4">
                        <!-- Nội dung sản phẩm mới sẽ được render bằng JS -->
                    </div>
                </div>
            </section>

            <!-- Thương hiệu đối tác -->
            <section class="py-5">
                <div class="container">
                    <div class="text-center mb-4">
                        <h2 class="fw-bold text-uppercase">Thương hiệu</h2>
                        <p class="text-muted mb-0">Đồng hành cùng các brand chính hãng</p>
                    </div>
                    <div class="brand-slider position-relative">
                        <div class="brand-track d-flex align-items-center">
                            <div class="brand-item px-4 opacity-1" th:each="brand : ${activeBrands}">
                                <img class="img-fluid" th:src="${brand.logoUrl}" th:alt="${brand.name}"
                                    style="max-height:80px">
                            </div>
                            <!-- Duplicate for seamless loop -->
                            <div class="brand-item px-4 opacity-1" th:each="brand : ${activeBrands}">
                                <img class="img-fluid" th:src="${brand.logoUrl}" th:alt="${brand.name}"
                                    style="max-height:80px">
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Bài viết / Tin tức -->
            <section class="py-5 bg-light">
                <div class="container">
                    <div class="d-flex align-items-center justify-content-between mb-4">
                        <h2 class="fw-bold mb-0 text-uppercase">Làm đẹp cùng Liora</h2>
                        <a href="/content/list/lam-dep-cung-liora" class="text-pink-primary fw-semibold">Xem tất cả</a>
                    </div>
                    <div class="row g-4">
                        <div class="col-md-4" th:each="p : ${latestBeautyPages}">
                            <a th:href="@{'/content/page/' + ${p.slug}}"
                                class="card border-0 shadow-sm h-100 text-decoration-none text-dark">
                                <div class="ratio ratio-16x9">
                                    <img th:if="${p.thumbnailUrl != null}" th:src="${p.thumbnailUrl}" alt="thumbnail"
                                        class="card-img-top" style="object-fit:cover;">
                                    <img th:if="${p.thumbnailUrl == null}"
                                        src="https://via.placeholder.com/800x450?text=No+Image" alt="placeholder"
                                        class="card-img-top" style="object-fit:cover;">
                                </div>
                                <div class="card-body">
                                    <div class="fw-semibold" th:text="${p.title}">Tiêu đề</div>
                                    <small class="text-muted"
                                        th:text="${p.publishedAt != null ? #temporals.format(p.publishedAt, 'dd/MM/yyyy') : (#temporals.format(p.createdAt, 'dd/MM/yyyy'))}">Ngày</small>
                                </div>
                            </a>
                        </div>
                        <div class="col-12" th:if="${#lists.isEmpty(latestBeautyPages)}">
                            <div class="alert alert-info mb-0">Chưa có bài viết nào trong nhóm này.</div>
                        </div>
                    </div>
                </div>
            </section>


        </div>

    </main>

    <!-- Footer -->
    <div th:replace="user/layout/user-footer :: footer"></div>

    <!-- Auth Modal -->
    <div class="modal fade" id="authModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-0 shadow-lg">
                <div class="modal-header border-0 text-center">
                    <h5 class="modal-title fw-bold fs-4 text-dark w-100" id="authModalTitle">
                        Welcome Back! 💕
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body px-4 pb-4">
                    <form id="authForm">
                        <a class="google-btn" href="/oauth2/authorization/google">
                            <img src="https://developers.google.com/identity/images/g-logo.png" alt="Google">
                            Đăng nhập với Google
                        </a>

                        <div class="divider">
                            <span>hoặc</span>
                        </div>
                        <div id="signupFields" style="display: none;">
                            <div class="mb-3">
                                <label class="form-label fw-medium text-dark">Email</label>
                                <input type="email" class="form-control rounded-pill" placeholder="Email của bạn"
                                    id="authEmail">
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-medium text-dark">Họ</label>
                                <input type="text" class="form-control rounded-pill" placeholder="Họ"
                                    id="authFirstName">
                            </div>
                            <div class="mb-3">
                                <label class="form-label fw-medium text-dark">Tên</label>
                                <input type="text" class="form-control rounded-pill" placeholder="Tên"
                                    id="authLastName">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-medium text-dark">Username</label>
                            <input type="username" class="form-control rounded-pill" placeholder="Tên đăng nhập của bạn"
                                required id="username">
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-medium text-dark">Password</label>
                            <input type="password" class="form-control rounded-pill" placeholder="Mật khẩu của bạn"
                                required id="password">
                        </div>
                        <button type="submit" class="btn btn-pink-primary w-100 fw-semibold py-3 rounded-pill mb-3"
                            id="authSubmitBtn">
                            Đăng nhập
                        </button>
                        <div class="forgot-password">
                            <a href="#!">Quên mật khẩu?</a>
                        </div>
                        <div class="text-center">
                            <button type="button" class="btn btn-link text-pink-primary fw-medium" id="authToggle">
                                Chưa có tài khoản? Đăng ký
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3" id="toastContainer">
        <!-- Toasts will be added here dynamically -->
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript (ensure main.js loads before auth.js) -->
    <script th:src="@{/user/js/main.js}"></script>
    <script th:src="@{/user/js/products.js}"></script>
    <script th:src="@{/user/js/reviews.js}"></script>
    <script th:src="@{/user/js/auth.js}"></script>

    <!-- Initialize Banner Slider -->
    <script>
        // Initialize banner slider when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            if (window.BannerSlider) {
                new BannerSlider();
            }
        });
    </script>

    <script>
        $(document).ready(function() {
            $('.btn-cart').click(function(e) {
                e.preventDefault();
                window.location.href = '/cart';
            });
        });
    </script>

</body>

</html>